{% extends "products/layout.html" %} {% block content %}
<div class="mb-8">
  <h1 class="text-4xl font-bold text-gray-900 mb-2">Gestión de Productos</h1>
  <p class="text-gray-600">Administra tu catálogo de productos</p>
</div>

<div class="bg-white rounded-xl shadow-md p-6 mb-8">
  <div class="flex flex-col sm:flex-row gap-4 items-center justify-between">
    <div class="w-full sm:w-96">
      <form action="{% url 'products:lista' %}" method="get">
        <div class="flex gap-2 items-center justify-center">
          <input
            type="text"
            name="q"
            placeholder="Buscar por nombre o descripción..."
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent transition-all duration-300"
          />
          <button
            type="submit"
            class="w-full sm:w-auto bg-indigo-600 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-300 hover:scale-105"
          >
            Buscar
          </button>
        </div>
      </form>
    </div>
    <a
      href="{% url 'products:add' %}"
      class="w-full sm:w-auto bg-emerald-500 hover:bg-emerald-600 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-300 hover:scale-105"
    >
      + Crear Producto
    </a>
  </div>
</div>

<div class="bg-white rounded-xl shadow-md overflow-hidden">
  <div class="overflow-x-auto">
    <table class="w-full">
      <thead class="bg-gradient-to-r from-purple-600 to-purple-700 text-white">
        <tr>
          <th class="px-6 py-4 text-left text-sm font-semibold">ID</th>
          <th class="px-6 py-4 text-left text-sm font-semibold">Imagen</th>
          <th class="px-6 py-4 text-left text-sm font-semibold">Nombre</th>
          <th class="px-6 py-4 text-left text-sm font-semibold">Descripción</th>
          <th class="px-6 py-4 text-left text-sm font-semibold">Precio</th>
          <th class="px-6 py-4 text-left text-sm font-semibold">Stock</th>
          <th class="px-6 py-4 text-center text-sm font-semibold">Acciones</th>
        </tr>
      </thead>
      <!-- TABLE BODY -->
      <tbody id="productsTableBody" class="divide-y divide-gray-200">
        {% if products %} {% for product in products %}
        <tr class="hover:bg-gray-50 transition-colors duration-200">
          <td class="px-6 py-4 text-sm text-gray-900 font-medium">
            #{{product.id}}
          </td>
          <td class="px-6 py-4 text-sm">
            <img
              class="w-12 h-12 rounded-lg object-cover"
              src="{{product.img.url}}"
            />
          </td>
          <td class="px-6 py-4 text-sm text-gray-900 font-medium">
            {{product.name}}
          </td>
          <td class="px-6 py-4 text-sm text-gray-600">
            {{product.description}}
          </td>
          <td class="px-6 py-4 text-sm font-semibold text-purple-600">
            {{product.price}}
          </td>
          <td class="px-6 py-4 text-sm font-semibold text-purple-600">
            {{product.stock}}
          </td>
          <td class="px-6 py-4 text-sm">
            <div class="flex justify-center gap-2">
              <a
                href="{% url 'products:update' product.id %}"
                class="bg-sky-500 hover:bg-sky-600 text-white px-3 py-2 rounded-lg transition-all duration-300 hover:scale-105"
              >
                Editar
              </a>
              <a
                href="{% url 'products:delete' product.id %}"
                class="bg-rose-500 hover:bg-rose-600 text-white px-3 py-2 rounded-lg transition-all duration-300 hover:scale-105"
              >
                Eliminar
              </a>
            </div>
          </td>
        </tr>
        {% endfor %} {% else %}
        <div
          data-aos="flip-up"
          class="bg-white rounded-lg shadow-lg p-8 text-center flex-1"
        >
          <div class="mb-6 flex justify-center">
            <div
              class="w-20 h-20 bg-gradient-to-br from-purple-200 to-purple-100 rounded-full flex items-center justify-center"
            >
              <svg
                class="w-10 h-10 text-purple-600"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"
                ></path>
              </svg>
            </div>
          </div>

          <h2 class="text-2xl font-bold text-purple-900 mb-2">Sin productos</h2>
          <p class="text-gray-600 mb-6 leading-relaxed">
            No encontramos productos para mostrar. Intenta a recargar la pagina
            o crear alguno.
          </p>
        </div>
        {% endif %}
      </tbody>
    </table>
  </div>
</div>
<script type="module">
  import autoAnimate from "https://cdn.jsdelivr.net/npm/@formkit/auto-animate@1.0.0-beta.1/index.min.js";
  autoAnimate(document.getElementById("productsTableBody"));
</script>
<script></script>
{% if messages %} {% for message in messages %}
<script>
  Toastify({
    text: "{{message}}",
    duration: 3000,
    position: "left",
    className: "text-emerald-500 ",
    backgroundColor: "#1F2937",
  }).showToast();
</script>

<script>
  const deleteItem = async (id) => {
    if (!confirm("¿Seguro seguro que quieres eliminar este preciado articulo?"))
      return;
  };
</script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const deleteBtns = document.querySelectorAll(".produt-to-delete");
    [...deleteBtns].forEach((btn) => {
      btn.addEventListener;
    });
  });
</script>

{% endfor %} {% endif %} {% endblock %}
