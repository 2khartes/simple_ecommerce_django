{% extends "main/layout.html" %} {% load static %} {% block content %}
<div class="max-w-2xl mx-auto my-12">
  <div class="mb-8 px-3">
    <h1 class="text-4xl font-bold text-black mb-2">Formulario de Producto</h1>
    <p class="text-gray-600">
      Completa los campos para crear o actualizar un producto
    </p>
  </div>

  <div class="border-4 border-black shadow-lg p-8 mx-4">
    <form
      novalidate
      id="product_form"
      class="space-y-6"
      action="{% if product %}{% url 'products:update' product.id %}{% else %}{% url 'products:add' %}{% endif %}"
      method="post"
      enctype="multipart/form-data"
    >
      {% csrf_token %}
      <div>
        <label for="name" class="block font-semibold text-black">
          Nombre del Producto
        </label>
        <input
          type="text"
          id="name"
          name="name"
          placeholder="Ej: Laptop Pro 15"
          class="w-full px-4 py-3 border-[3px] border-black focus:outline-none bg-[#F5E6CF] focus:border-amber-500 font-semibold transition-colors duration-300"
          value="{{product.name}}"
        />
        <span id="error_name" class="text-red-500 font-semibold"></span>
      </div>

      <div>
        <label for="price" class="block font-semibold text-black">
          Precio ($)
        </label>
        <input
          type="number"
          id="price"
          name="price"
          placeholder="Ej: 1299.99"
          step="0.01"
          min="0"
          class="w-full px-4 py-3 border-[3px] border-black focus:outline-none bg-[#F5E6CF] focus:border-amber-500 font-semibold transition-colors duration-300"
          value="{{product.price}}"
        />
        <span id="error_price" class="text-red-500 font-semibold"></span>
      </div>
      <div>
        <label for="stock" class="block font-semibold text-black">
          Stock
        </label>
        <input
          type="number"
          id="stock"
          placeholder="ej: 22"
          min="0"
          name="stock"
          class="w-full px-4 py-3 border-[3px] border-black focus:outline-none bg-[#F5E6CF] focus:border-amber-500 font-semibold transition-colors duration-300"
          value="{{product.stock}}"
        />
        <span id="error_stock" class="text-red-500 font-semibold"></span>
      </div>
      <div>
        <span class="block font-semibold text-black">Imagen</span>
        <label for="img">
          <div
            id="container-img"
            class="border-4 cursor-pointer border-dashed border-black rounded-lg p-6 text-center bg-[#F5E6CF]"
          >
            {% if product %}
            <img
              src="{{product.img.url}}"
              alt="{{product.name}}"
              class="mx-auto"
            />
            {% else %}
            <div id="preview" class="text-gray-500">
              <p class="text-black font-semibold">
                La vista previa de la imagen aparecerá aquí
              </p>
            </div>
            {% endif %}
          </div>
        </label>
        <span id="error_img" class="text-red-500 font-semibold"></span>

        <input type="file" class="hidden" name="img" id="img" />
      </div>

      <div>
        <label for="description" class="block font-semibold text-black">
          Descripción
        </label>
        <textarea
          id="description"
          name="description"
          placeholder="Describe las características y beneficios del producto..."
          rows="5"
          class="w-full px-4 py-3 border-[3px] border-black focus:outline-none bg-[#F5E6CF] focus:border-amber-500 font-semibold transition-colors duration-300"
        >
{% if product %}{{ product.description }}{% endif %}</textarea
        >
        <span id="error_description" class="text-red-500 font-semibold"></span>
      </div>

      <div
        class="flex gap-4 pt-6 flex-wrap items-center md:justify-center w-full"
      >
        <button type="submit" class="btn w-full md:w-fit bg-emerald-500">
          {% if product %} Actualizar {% else %} Crear {% endif %}
        </button>
        <button type="reset" class="btn w-full md:w-fit bg-slate-200">
          {% if product %} Restaurar {% else %} Limpiar Formulario {% endif %}
        </button>
        <a
          href="{% url 'products:lista' %}"
          class="btn text-center w-full md:w-fit bg-orange-500"
        >
          Cancelar
        </a>
      </div>
    </form>
  </div>
</div>

<script src="{% static 'main/js/create_product.js' %}"></script>

{% endblock %}
